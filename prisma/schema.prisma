generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id            String     @id @default(auto()) @map("_id") @db.ObjectId
  email         String     @unique
  phone         String
  birth         DateTime
  refferralCode String?    @default("")
  password      String
  isDeleted     Boolean    @default(false)
  expirationOtp DateTime?
  otp           Int?
  role          UserRole   @default(USER)
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  UserInfo      UserInfo[]

  @@map("Users")
}

model UserInfo {
  id                String      @id @default(auto()) @map("_id") @db.ObjectId
  fullName          String
  image             String?     @default("")
  age               Int
  gender            Gender
  weight            Float
  height            Float
  fitnessGoal       FitnessGoal
  dietaryPreference String
  isDeleted         Boolean     @default(false)
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
  userId            String      @db.ObjectId
  user              User        @relation(fields: [userId], references: [id])

  @@map("User-Info")
}

enum UserRole {
  ADMIN
  USER
}

enum FitnessGoal {
  LOSE_WEIGHT
  BUILD_MUSCLE
  STAY_HEALTHY
  OTHER
}

enum Gender {
  MALE
  FEMALE
}
